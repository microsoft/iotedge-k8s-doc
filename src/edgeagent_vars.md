> ⚠️ **Deprecation notice**
>
> This preview integration of IoT Edge 1.x and Kubernetes will not be made generally available, and is no longer supported. The recommended way to run IoT Edge 1.x on Kubernetes is noted in the [product's official docs](https://docs.microsoft.com/azure/iot-edge/how-to-install-iot-edge-kubernetes?view=iotedge-2020-11)

Edge agent can be configured with various environment variables as described below



                                                                                                                                                                            
| Variable Name                        | Value                                                                                                                                                                                                                                                                 |
|--------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| portMappingServiceType               | <ul><li>**clusterIP** to expose the service on a cluster Internal IP </li> <li> **NodePort** to expose the service on each Node's IP at a static port </li>   <li> **LoadBalancer** to expose the service externally using a cloud provider's load balancer </li> <ul> |
| backupConfigFilePath                 | <ul> Path of the location for the backup configuration file </ul>                                                                                                                                                                                                     |
| enableK8sServiceCallTracing          | <ul><li>**true** to enable the logging for K8s service API </li> <li>**false** to enable the logging for K8s service API </li>                                                                                                                                        |
| runtimeLogLevel                      | <ul><li> debug </li> <li> info </li> <li> warn </li> <li> error </li></ul>                                                                                                                                                                                            |
| upstreamProtocol                     | <ul><li>**Amqp** for AMQP protocol </li>  <li>**AmqpWs** for the fallback sceanrio </ul>                                                                                                                                                                              |
| runAsNonRoot                         | <ul><li>**true** starts all modules as a non-root user (uid 1000) </li>  <li>**false** starts all module per user specfied in Dockerfile (docker defaults to `root` if no user is specified in Dockerfile) </li> <ul>                                                                                                                                                      |
| enableK8sExtensions                  | <ul><li>**true** to enable the module's create options with K8s primitives </li>  <li> **false** to disable the module's create options with K8s primitives </li> </ul>                                                                                               |
| enableExperimentalFeatures           | <ul><li>**true** to enable the experimental features </li> <li> **false** to disable the experimental features </li> </ul>                                                                                                                                            |
| storageClassName                     | <ul> Specify the storage class name if you wish the volumes that backs persistent storage in modules to use dynamically provisioned PVCs. <br><br> When the edgeAgent is started with this option, any module that specifies a docker mount of type `volume` will be backed by a dynamically created PVC. </ul>                                                                                                                         |
| persistentVolumeName                 | <ul>Specify the persistent volume name if you wish the volume that backs up the persistent storage in modules to use that PV </ul>                                                                                                                                     |
| persistentVolumeClaimDefaultSizeInMb | <ul>Specify the persistent volume claim size in Mb when creating PVCs</ul>                                                                                                                                                                                            |
