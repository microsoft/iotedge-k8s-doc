<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Translations - Deploy Azure IoT Edge on Kubernetes (preview)</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="expanded "><a href="architecture.html"><strong aria-hidden="true">2.</strong> Architecture</a></li><li><ol class="section"><li class="expanded "><a href="multitenancy.html"><strong aria-hidden="true">2.1.</strong> Multi-tenancy</a></li><li class="expanded "><a href="security.html"><strong aria-hidden="true">2.2.</strong> Security</a></li><li class="expanded "><a href="scaling.html"><strong aria-hidden="true">2.3.</strong> HA and scaling</a></li><li class="expanded "><a href="vk.html"><strong aria-hidden="true">2.4.</strong> Compare with virtual-kubelet provider</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="reference.html"><strong aria-hidden="true">3.</strong> Reference</a></li><li><ol class="section"><li class="expanded "><a href="translations.html" class="active"><strong aria-hidden="true">3.1.</strong> Translations</a></li><li class="expanded "><a href="createoptions_extensions.html"><strong aria-hidden="true">3.2.</strong> createOptions extensions</a></li><li class="expanded "><a href="helmOptions.html"><strong aria-hidden="true">3.3.</strong> Helm chart install options</a></li><li><ol class="section"><li class="expanded "><a href="iotedged_vars.html"><strong aria-hidden="true">3.3.1.</strong> iotedged</a></li><li class="expanded "><a href="edgeagent_vars.html"><strong aria-hidden="true">3.3.2.</strong> edgeagent</a></li><li class="spacer"></li></ol></li></ol></li><li class="expanded "><a href="examples.html"><strong aria-hidden="true">4.</strong> Tutorials</a></li><li><ol class="section"><li class="expanded "><a href="examples/prereqs.html"><strong aria-hidden="true">4.1.</strong> Prerequisites</a></li><li class="expanded "><a href="examples/helloworld.html"><strong aria-hidden="true">4.2.</strong> Hello, world!</a></li><li class="expanded "><a href="examples/pervol.html"><strong aria-hidden="true">4.3.</strong> Using persistent volumes</a></li><li><ol class="section"><li class="expanded "><a href="examples/pervol_translation.html"><strong aria-hidden="true">4.3.1.</strong> With createOptions translations</a></li><li class="expanded "><a href="examples/pervol_extensions.html"><strong aria-hidden="true">4.3.2.</strong> With createOptions extensions</a></li></ol></li><li class="expanded "><a href="examples/configmaps.html"><strong aria-hidden="true">4.4.</strong> Using  volumes with configmaps</a></li><li class="expanded "><a href="examples/ha.html"><strong aria-hidden="true">4.5.</strong> Setup iotedged for failure resilience</a></li><li class="expanded "><a href="examples/services_internal.html"><strong aria-hidden="true">4.6.</strong> Exposing services within the cluster</a></li><li class="expanded "><a href="examples/services_external.html"><strong aria-hidden="true">4.7.</strong> Exposing services outside the cluster</a></li><li class="expanded "><a href="examples/nodeselector.html"><strong aria-hidden="true">4.8.</strong> Scheduling on specific nodes</a></li><li class="expanded "><a href="examples/resources.html"><strong aria-hidden="true">4.9.</strong> Specifying resource requirements and limits </a></li><li class="expanded "><a href="examples/iotcentraltutorial.html"><strong aria-hidden="true">4.10.</strong> IoT Central Tutorial </a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Deploy Azure IoT Edge on Kubernetes (preview)</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/microsoft/iotedge-k8s-doc/tree/master/src" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p>Azure IoT Edge's application model is based on the Docker API specifically the <a href="https://docs.docker.com/engine/api/v1.40/#operation/ContainerCreate">createOptions</a> schema. When running on Kubernetes, the same application model is retained and the runtime performs a number of automatic translations to the  Kubernetes application model. The goal is that these edge applications designed to run on a single node will work with minimal modifications when installed in a Kubernetes cluster. To achieve this, IoT Edge on Kubernetes has to transform the edge deployment into Kubernetes objects which will support module-module communication. </p>
<p>IoT Edge on Kubernetes creates Namespaces, Deployments, Services, ImagePullSecrets, PersistentVolumeClaims, and ServiceAccounts to establish this framework. The IoT Edge Docker to Kubernetes object mappings will be described in detail in subsequent sections.</p>
<h2><a class="header" href="#map-of-configuration-source-to-kubernetes-objects" id="map-of-configuration-source-to-kubernetes-objects">Map of configuration source to Kubernetes objects</a></h2>
<p>The following tables link the critical parts of an edge deployment to the associated Kubernetes 
objects that will be created.</p>
<h3><a class="header" href="#edgedeployment" id="edgedeployment">EdgeDeployment</a></h3>
<table><thead><tr><th>Setting</th><th>Affected k8s objects</th></tr></thead><tbody>
<tr><td>runtime.settings.registryCredentials</td><td><a href="#podtemplate">Deployment</a>, <a href="#imagepullsecret">ImagePullSecret</a></td></tr>
</tbody></table>
<h4><a class="header" href="#module-spec" id="module-spec">Module Spec</a></h4>
<table><thead><tr><th>Setting</th><th>Affected k8s objects</th></tr></thead><tbody>
<tr><td>modules.<code>&lt;module name&gt;</code></td><td><a href="#deployment">Deployment</a>, <a href="#service">Service</a>, <a href="#persistentvolumeclaim">PersistentVolumeClaim</a> , <a href="#serviceaccount">ServiceAccount</a></td></tr>
<tr><td>modules.<code>&lt;module name&gt;</code>.settings.image</td><td><a href="#podtemplate">Deployment</a></td></tr>
<tr><td>modules.<code>&lt;module name&gt;</code>.settings.createOptions</td><td>See <a href="#module-spec-createoptions">Module Spec createOptions</a></td></tr>
<tr><td>modules.<code>&lt;module name&gt;</code>.env</td><td><a href="#podtemplate">Deployment</a></td></tr>
</tbody></table>
<h4><a class="header" href="#module-spec-createoptions" id="module-spec-createoptions">Module Spec createOptions</a></h4>
<table><thead><tr><th>Setting</th><th>Affected k8s objects</th></tr></thead><tbody>
<tr><td>createOptions.Labels</td><td><a href="#podtemplate">Deployment</a></td></tr>
<tr><td>createOptions.Env</td><td><a href="#podtemplate">Deployment</a></td></tr>
<tr><td>createOptions.HostConfig.Privileged</td><td><a href="#podtemplate">Deployment</a></td></tr>
<tr><td>createOptions.HostConfig.Binds</td><td><a href="#podtemplate">Deployment</a></td></tr>
<tr><td>createOptions.HostConfig.Mounts</td><td><a href="#podtemplate">Deployment</a>, <a href="#persistentvolumeclaim">PersistentVolumeClaim</a></td></tr>
<tr><td>createOptions.HostConfig.ExposedPorts</td><td><a href="#service">Service</a></td></tr>
<tr><td>createOptions.HostConfig.PortBindings</td><td><a href="#service">Service</a></td></tr>
</tbody></table>
<h3><a class="header" href="#helm-chart" id="helm-chart">Helm Chart</a></h3>
<p>Some information needed to provision the edge deployment isn't available until the runtime is 
installed on the cluster. These are the settings which can be assigned in the Helm chart, and how 
they affect the Kubernetes objects.</p>
<table><thead><tr><th>Setting</th><th>Affected k8s objects</th></tr></thead><tbody>
<tr><td>edgeAgent.env.portMappingServiceType</td><td><a href="#service">Service</a></td></tr>
<tr><td>edgeAgent.env.persistentVolumeClaimDefaultSizeInMb</td><td><a href="#podtemplate">Deployment</a>, <a href="#persistentvolumeclaim">PersistentVolumeClaim</a></td></tr>
<tr><td>edgeAgent.env.persistentVolumeName</td><td><a href="#podtemplate">Deployment</a>, <a href="#persistentvolumeclaim">PersistentVolumeClaim</a></td></tr>
<tr><td>edgeAgent.env.storageClassName</td><td><a href="#podtemplate">Deployment</a>, <a href="#persistentvolumeclaim">PersistentVolumeClaim</a></td></tr>
<tr><td>edgeAgent.env.enableExperimentalFeatures</td><td><a href="#podtemplate">Deployment</a> - See <a href="#k8s-extensions">K8s Extensions</a> for details</td></tr>
<tr><td>edgeAgent.env.enableK8sExtensions</td><td><a href="#podtemplate">Deployment</a> - See <a href="#k8s-extensions">K8s Extensions</a> for details</td></tr>
</tbody></table>
<h2><a class="header" href="#conversion-details" id="conversion-details">Conversion details</a></h2>
<p>The following sections describe in detail how the Edge deployment gets translated into Kubernetes
objects.</p>
<h2><a class="header" href="#namespace" id="namespace">Namespace</a></h2>
<p>IoT Edge on K8s is intended to be installed in a namespace - the <code>default</code> namespace is not recommended. 
The namespace is provided by the user and must be created before the runtime can be installed. The 
Azure IoT Edge runtime will be installed in the given namespace, and there is a 1 to 1 relationship 
between that namespace and the edge device. Two devices may not be installed in the same namespace, 
but there may be multiple namespaces in the cluster running IoT Edge on K8s. All objects created by 
IoT Edge on K8s will be namespaced.</p>
<h2><a class="header" href="#common-labels" id="common-labels">Common labels</a></h2>
<p>There will be a default label set used on most created objects in IoT Edge on K8s deployment. Three 
labels are put into object metadata:</p>
<ul>
<li><strong>net.azure-devices.edge.module</strong> = module name</li>
<li><strong>net.azure-devices.edge.deviceid</strong> = device id</li>
<li><strong>net.azure-devices.edge.hub</strong> = associated IoT Hub name.</li>
</ul>
<p>All values will be sanitized to be a K8S label value.  For example, &quot;edgeHub&quot; will be transformed 
to &quot;edgehub&quot;.</p>
<h2><a class="header" href="#deployment" id="deployment">Deployment</a></h2>
<p>Each Edge Module will create one Deployment. This will run the module's specified container image.</p>
<h3><a class="header" href="#metadata" id="metadata">metadata</a></h3>
<ul>
<li><strong>name</strong>        = Name will be the module name, sanitized to be a K8s identifier.</li>
<li><strong>namespace</strong>   = The given namespace.</li>
<li><strong>labels</strong>      = Default label set.</li>
<li><strong>annotations</strong> = Deployments will have the original JSON creation string added in the field &quot;net.azure-devices.edge.creationstring&quot;.</li>
</ul>
<h3><a class="header" href="#spec-deploymentspec" id="spec-deploymentspec">spec (DeploymentSpec)</a></h3>
<ul>
<li><strong>replicas</strong> = Currently set to 1 - only 1 Pod will be created for each module.</li>
<li><strong>selector</strong> = This currently matches the Default label set.</li>
<li><strong>template</strong> = See <a href="#podtemplate">PodTemplate</a>.</li>
</ul>
<h3><a class="header" href="#podtemplate" id="podtemplate">PodTemplate</a></h3>
<h5><a class="header" href="#metadata-1" id="metadata-1">metadata</a></h5>
<ul>
<li><strong>name</strong>        = Name will be the module name, sanitized to be a K8s identifier.</li>
<li><strong>namespace</strong>   = The given namespace.</li>
<li><strong>labels</strong>      = Default label set.</li>
<li><strong>annotations</strong> = The pod's metadata will have one fixed annotation:
<ul>
<li><strong>net.azure-devices.edge.original-moduleid</strong> = unsanitized module id from Edge Deployment Spec.</li>
<li>then <code>settings.createOptions.Labels</code> will be added to the pod's annotations.</li>
</ul>
</li>
</ul>
<h5><a class="header" href="#spec-podspec" id="spec-podspec">spec (PodSpec)</a></h5>
<ul>
<li><strong>containers</strong>
<ul>
<li><strong>Proxy container</strong>
This will contain the specification for the module to iotedged proxy.</li>
<li><strong>Module container</strong>
<ul>
<li><strong>name</strong> = Name will be the module name, sanitized to be a K8s identifier.</li>
<li><strong>image</strong> = <code>settings.image</code></li>
<li><strong>env</strong> = env will contain some predefined settings for all modules, then:
<ul>
<li>Add all environment variables from <code>env</code> section in module spec.</li>
<li>Add all environment variables from <code>settings.createOptions.Env</code>.</li>
</ul>
</li>
<li><strong>securityContext</strong>
<ul>
<li>privileged = Derived from <code>settings.createOptions.HostConfig.Privileged</code>.</li>
</ul>
</li>
<li><strong>volumeMounts</strong> = There are 4 sources to volume mounts.
<ul>
<li>bind mounts from <code>settings.createOptions.HostConfig.Binds</code> in format &quot;host path:target path[:readwrite mode]&quot;.
<em>This is not recommended for IoT Edge on K8s.</em>
<ul>
<li>Name = Sanitized host path.</li>
<li>MountPath = target path.</li>
<li>readOnlyProperty = readwrite mode if set, default is false.</li>
</ul>
</li>
<li>bind mounts from <code>settings.createOptions.HostConfig.Mounts</code>
<em>This is not recommended for IoT Edge on K8s.</em>
<ul>
<li>Name = mount.Source</li>
<li>MountPath = mount.Target</li>
<li>readOnlyProperty = readwrite mode if set, default is false.</li>
</ul>
</li>
<li>volume mounts from <code>settings.createOptions.HostConfig.Mounts</code>
<ul>
<li>Name = mount.Source</li>
<li>MountPath = mount.Target</li>
<li>readOnlyProperty = readwrite mode if set, default is false.</li>
</ul>
</li>
<li>volume mounts from <code>settings.k8s-extensions.volumes[*].volumeMounts</code>. Placed in spec 
as provided.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>imagePullSecrets</strong>
If the module server address matches a server address in the Edge Deployment's 
<em>Container Registry Settings</em>, this will be an array with one name, the created ImagePullSecret.</li>
<li><strong>volumes</strong> There are 4 sources for volumes.
<ul>
<li>bind mounts from <code>settings.createOptions.HostConfig.Binds</code> in format &quot;host path:target path[:readwrite mode]&quot;.
<em>This is not recommended for IoT Edge on K8s.</em>
<ul>
<li>name = Sanitized host path</li>
<li>hostPath
<ul>
<li>path = host path.</li>
<li>type = &quot;DirectoryOrCreate&quot;.</li>
</ul>
</li>
</ul>
</li>
<li>bind mounts from <code>settings.createOptions.HostConfig.Mounts</code>
<em>This is not recommended for IoT Edge on K8s.</em>
<ul>
<li>name = mount.Source</li>
<li>hostPath
<ul>
<li>path = mount.Source</li>
<li>type = &quot;DirectoryOrCreate&quot;.</li>
</ul>
</li>
</ul>
</li>
<li>volume mounts from <code>settings.createOptions.HostConfig.Mounts</code>
<ul>
<li>name = mount.Source</li>
<li>persistentVolumeClaim is assigned if edge runtime is started with <code>persistentVolumeName</code> 
or <code>storageClassName</code> set.
<ul>
<li>claimName = module name + mount.Source</li>
<li>readOnlyProperty = mount.ReadOnly</li>
</ul>
</li>
<li>emptyDir is assigned otherwise.</li>
</ul>
</li>
<li>volume mounts from <code>settings.k8s-extensions.volumes[*].volume</code>. Placed in spec as provided.</li>
</ul>
</li>
<li><strong>serviceAccountName</strong> = The module name, sanitized to be a K8s identifier.</li>
<li><strong>nodeSelector</strong> = <code>settings.k8s-extensions.nodeSelector</code> Placed in spec as provided.</li>
</ul>
<h2><a class="header" href="#service" id="service">Service</a></h2>
<h3><a class="header" href="#metadata-2" id="metadata-2">metadata</a></h3>
<ul>
<li><strong>name</strong>        = Name will be the module name, sanitized to be a K8s identifier.</li>
<li><strong>namespace</strong>   = The given namespace.</li>
<li><strong>labels</strong>      = Default label set.</li>
<li><strong>annotations</strong> = The service's metadata will have one fixed annotation:
<ul>
<li><strong>net.azure-devices.edge.creationstring</strong> = the original JSON creation string for this object.</li>
<li>then <code>settings.createOptions.Lables</code> will be added to the service's annotations.</li>
</ul>
</li>
</ul>
<h5><a class="header" href="#spec-servicespec" id="spec-servicespec">spec (ServiceSpec)</a></h5>
<ul>
<li><strong>type</strong> = ClusterIP if only exposed ports (<code>settings.createOptions.HostConfig.ExposedPorts</code>) are 
set. If port bindings (<code>settings.createOptions.HostConfig.PortBindings</code>) are set, runtime will use
the default set by <code>portMappingServiceType</code> on runtime startup, default is ClusterIP.</li>
<li><strong>ports</strong> = a list of port bindings
<ul>
<li><strong>port</strong> = Exposed port if source is <code>settings.createOptions.HostConfig.ExposedPorts</code>, 
host port if source is <code>settings.createOptions.HostConfig.PortBindings</code></li>
<li><strong>name</strong> = &quot;ExposedPort-<port>-<protocol>&quot; or &quot;HostPort-<port>-<protocol>&quot;</li>
<li><strong>protocol</strong> = protocol from port setting, default &quot;TCP&quot;</li>
<li><strong>targetPort</strong> = Assigned if source is <code>settings.createOptions.HostConfig.PortBindings</code>, 
set to Portbinding's target port.</li>
</ul>
</li>
<li><strong>selector</strong> = Default label set.</li>
</ul>
<h2><a class="header" href="#imagepullsecret" id="imagepullsecret">ImagePullSecret</a></h2>
<p>Image pull secrets are derived from the Edge Deployment's <em>Container Registry Settings</em>, which 
contain the following fields:</p>
<ul>
<li><strong>UserName</strong></li>
<li><strong>ServerAddress</strong></li>
<li><strong>Password</strong></li>
</ul>
<h3><a class="header" href="#metadata-3" id="metadata-3">metadata</a></h3>
<ul>
<li><strong>name</strong>        = &quot;<UserName>-<ServerAddress>&quot;</li>
<li><strong>namespace</strong>   = The given namespace.</li>
</ul>
<h3><a class="header" href="#data" id="data">data</a></h3>
<ul>
<li><strong>.dockerconfigjson</strong> = Base64 encoding of the pull secret.</li>
</ul>
<h2><a class="header" href="#persistentvolumeclaim" id="persistentvolumeclaim">PersistentVolumeClaim</a></h2>
<p>Persistent volume claims are created when a docker volume is requested (all volume mounts from 
<code>settings.createOptions.HostConfig.Mounts</code>), the persistent volume claim has not been created by the 
user, and the runtime has been set to expect to use persistent volumes.</p>
<p>The runtime is set to expect PVs by assigning <code>persistentVolumeName</code> or <code>storageClassName</code> at 
startup. User will also need to set a value for <code>persistentVolumeClaimDefaultSizeInMb</code>. This value 
gives the Edge Runtime a default claim size as this is not provided by <code>createOptions</code>.</p>
<h3><a class="header" href="#metadata-4" id="metadata-4">metadata</a></h3>
<ul>
<li><strong>name</strong>        = mount.Source from <code>settings.createOptions.HostConfig.Mounts</code>.</li>
<li><strong>namespace</strong>   = The given namespace.</li>
<li><strong>labels</strong>      = Default label set.</li>
</ul>
<h3><a class="header" href="#spec-persistentvolumeclaimspec" id="spec-persistentvolumeclaimspec">spec (PersistentVolumeClaimSpec)</a></h3>
<ul>
<li><strong>accessModes</strong> = list with one element, &quot;ReadOnlyMany&quot; if mount.ReadOnly is true, otherwise, 
&quot;ReadWriteMany&quot;</li>
<li><strong>resources</strong>
<ul>
<li><strong>requests</strong>
<ul>
<li><strong>storage</strong> = <code>persistentVolumeClaimDefaultSizeInMb</code></li>
</ul>
</li>
<li><strong>volumeName</strong> = <code>persistentVolumeName</code> - assigned if set.</li>
<li><strong>storageClass</strong> = <code>storageClassName</code> - assigned if set and <code>persistentVolumeName</code> is not set.</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#serviceaccount" id="serviceaccount">ServiceAccount</a></h2>
<p>Service accounts are described in the document describing our <a href="https://github.com/Azure/iotedge/blob/release/1.1/kubernetes/doc/rbac.md">Edge RBAC repo docs</a></p>
<h3><a class="header" href="#k8s-extensions" id="k8s-extensions">K8s Extensions</a></h3>
<p>Some Kubernetes concepts are not represented in the Docker ContainerCreate structure. IoT Edge on 
K8s has provided extensions to the createOptions which will give some useful extensions to an 
IoT Edge application running on Kubernetes. This is described in <a href="https://github.com/Azure/iotedge/blob/release/1.1-k8s-preview/kubernetes/doc/create-options.md">Kubernetes createOptions 
Extensions</a>.</p>
<p>Extensions available:</p>
<ul>
<li><a href="create-options.html#volumes">Kubernetes native volume support</a></li>
<li><a href="create-options.html#cpu-memory-and-device-resources">Setting CPU and Memory limits</a></li>
<li><a href="create-options.html#assigning-modules-to-nodes">Assigning Modules to Nodes</a></li>
<li><a href="create-options.html#apply-pod-security-context">Applying Pod Security Context</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="reference.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="createoptions_extensions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="reference.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="createoptions_extensions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
